<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İnteraktif Çözümlü Soru Bankası</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Özel CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';</script>
    
    <!-- MathJax (Formüller için) -->
    <script>
        window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }, svg: { fontCache: 'global' } };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <!-- Üst Menü -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark py-2">
        <div class="container-fluid">
            <button class="btn btn-outline-light me-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocPanel">
                <i class="fa-solid fa-list"></i> İçindekiler
            </button>
            <span class="navbar-brand mx-auto" id="bookTitle">Dijital Soru Bankası</span>
            <span class="text-white" id="pageInfo">Sayfa: 1</span>
        </div>
    </nav>

    <!-- Ana İçerik -->
    <div class="main-container">
        <!-- PDF Görüntüleyici -->
        <div id="pdf-wrapper">
            <canvas id="the-canvas"></canvas>
            
            <!-- Sayfa Çevirme Butonları (Overlay) -->
            <button class="nav-btn prev-btn" onclick="changePage(-1)"><i class="fa-solid fa-chevron-left"></i></button>
            <button class="nav-btn next-btn" onclick="changePage(1)"><i class="fa-solid fa-chevron-right"></i></button>
        </div>
    </div>

    <!-- Alt Kontrol Paneli (Cevap Anahtarı) -->
    <div class="bottom-bar">
        <div class="answer-buttons" id="optikForm">
            <span class="me-2 fw-bold text-white">Cevabınız:</span>
            <button class="btn btn-circle btn-light optik-btn" data-opt="A">A</button>
            <button class="btn btn-circle btn-light optik-btn" data-opt="B">B</button>
            <button class="btn btn-circle btn-light optik-btn" data-opt="C">C</button>
            <button class="btn btn-circle btn-light optik-btn" data-opt="D">D</button>
            <button class="btn btn-circle btn-light optik-btn" data-opt="E">E</button>
        </div>
        <div class="action-buttons ms-3">
            <button class="btn btn-warning" onclick="showSolution()"><i class="fa-solid fa-lightbulb"></i> Çözümü Gör</button>
        </div>
    </div>

    <!-- SOL PANEL: İçindekiler -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="tocPanel">
        <div class="offcanvas-header bg-light">
            <h5 class="offcanvas-title">İçindekiler</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body p-0">
            <div class="list-group list-group-flush" id="tocList">
                <!-- Burası JS ile doldurulacak -->
            </div>
        </div>
    </div>

    <!-- SAĞ PANEL: Çözüm Anlatımı -->
    <div class="offcanvas offcanvas-end w-50" tabindex="-1" id="solutionPanel" data-bs-scroll="true" data-bs-backdrop="false">
        <div class="offcanvas-header bg-primary text-white">
            <h5 class="offcanvas-title"><i class="fa-solid fa-chalkboard-user"></i> Soru Çözümü</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <div id="solutionContent" class="markdown-body">
                <!-- Çözüm buraya yüklenecek -->
                <div class="text-center text-muted mt-5">
                    <i class="fa-solid fa-spinner fa-spin fa-3x"></i>
                    <p>Çözüm yükleniyor veya bu sayfa için çözüm yok.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Ana Mantık -->
    <script src="app.js"></script>
</body>
</html>
